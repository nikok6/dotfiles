# Path to your Oh My Zsh installation.
export ZSH="$HOME/.oh-my-zsh"

ZSH_THEME="refined"

{{ if eq .machineType "devcontainer" -}}
plugins=(git zsh-autosuggestions zsh-syntax-highlighting)
{{ else if eq .machineType "work" -}}
plugins=(git docker zsh-autosuggestions zsh-syntax-highlighting)
{{ else -}}
plugins=(git zsh-autosuggestions zsh-syntax-highlighting)
{{ end -}}

source $ZSH/oh-my-zsh.sh

{{ if eq .machineType "work" -}}
[ -f "$HOME/.secrets.zsh" ] && source "$HOME/.secrets.zsh"
source ${ENSUREIT_DIR}/bin/setenv.sh

# Docker CLI completions
fpath=($HOME/.docker/completions $fpath)
autoload -Uz compinit
if [[ -n ~/.zcompdump(#qN.mh+24) ]]; then
  compinit
else
  compinit -C
fi

# Devcontainer aliases
devcexec() { devcontainer exec --workspace-folder . "$@" }
alias devczsh='devcexec zsh'
alias devcopen='devcontainer up --workspace-folder . --dotfiles-repository https://github.com/nikok6/dotfiles'
alias devcstop='docker stop $(docker ps -q --filter "label=devcontainer.local_folder=$(pwd)")'
alias devcrebuild='devcontainer rebuild --workspace-folder .'
{{ end -}}

{{ if eq .machineType "devcontainer" -}}
export TERM=xterm-256color
{{ end -}}

# Consolidated PATH
export PATH="$HOME/.local/bin:$PATH"

# zoxide (smarter cd)
eval "$(zoxide init zsh)"

# eza (modern ls)
alias ls='eza --icons'
alias ll='eza -l --icons'
alias la='eza -la --icons'

{{ if ne .machineType "devcontainer" -}}
# Unlock keychain
alias unlock='security unlock-keychain'
{{ end -}}

# Reload zsh config
alias reload='source ~/.zshrc'

# Claude Code aliases
alias cc="claude"
alias ccc="claude -c"
alias ccr="claude -r"
